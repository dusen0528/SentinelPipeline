version: "3.8"

services:
  sentinel-pipeline:
    build: .
    container_name: sentinel_pipeline
    env_file: .env
    volumes:
      - ./models:/app/models
      - ./config.json:/app/config.json
    ports:
      - "9000:9000"
    restart: always
    environment:
      - PORT=9000
      - HOST=0.0.0.0
    deploy:
      resources:
        limits:
          cpus: "4"
          memory: "6G"

  # Flashphoner는 선택사항입니다. 다른 곳에서 실행 중이면 주석 처리하세요.
  # flashphoner:
  #   image: flashphoner/webcallserver:latest
  #   container_name: flashphoner
  #   ports:
  #     - "1935:1935"
  #     - "8443:8443"
  #   restart: always
