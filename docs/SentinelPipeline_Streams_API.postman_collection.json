{
    "info": {
        "_postman_id": "sentinel-pipeline-api",
        "name": "SentinelPipeline API",
        "description": "SentinelPipeline 종합 API 컬렉션.\n\n'base_url' 변수를 설정하여 환경을 전환하세요 (예: http://localhost:8000)",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "1. 비디오 스트림 제어",
            "item": [
                {
                    "name": "1.1 스트림 목록 조회",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/video/streams"
                    }
                },
                {
                    "name": "1.2 특정 스트림 상세 조회",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/video/streams/{{stream_id}}"
                    }
                },
                {
                    "name": "1.3 스트림 시작",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"rtsp_url\": \"{{rtsp_url}}\",\n  \"max_fps\": 30,\n  \"downscale\": 1.0\n}"
                        },
                        "url": "{{base_url}}/api/video/streams/{{stream_id}}/start"
                    }
                },
                {
                    "name": "1.4 스트림 중지",
                    "request": {
                        "method": "POST",
                        "url": "{{base_url}}/api/video/streams/{{stream_id}}/stop"
                    }
                },
                {
                    "name": "1.5 스트림 재시작",
                    "request": {
                        "method": "POST",
                        "url": "{{base_url}}/api/video/streams/{{stream_id}}/restart"
                    }
                },
                {
                    "name": "1.6 스트림 연결 끊기 (완전 정리)",
                    "request": {
                        "method": "POST",
                        "url": "{{base_url}}/api/video/streams/{{stream_id}}/disconnect"
                    }
                },
                {
                    "name": "1.7 입력 URL로 출력 URL 조회",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/video/streams/by-input?input_url={{rtsp_url}}"
                    }
                },
                {
                    "name": "1.8 입력 URL로 스트림 시작",
                    "request": {
                        "method": "POST",
                        "url": "{{base_url}}/api/video/streams/by-input/start?input_url={{rtsp_url}}"
                    }
                },
                {
                    "name": "1.9 입력 URL로 스트림 중지",
                    "request": {
                        "method": "POST",
                        "url": "{{base_url}}/api/video/streams/by-input/stop?input_url={{rtsp_url}}"
                    }
                },
                {
                    "name": "1.10 입력 URL로 스트림 재시작",
                    "request": {
                        "method": "POST",
                        "url": "{{base_url}}/api/video/streams/by-input/restart?input_url={{rtsp_url}}"
                    }
                },
                {
                    "name": "1.11 입력 URL로 스트림 연결 끊기",
                    "request": {
                        "method": "POST",
                        "url": "{{base_url}}/api/video/streams/by-input/disconnect?input_url={{rtsp_url}}"
                    }
                },
                {
                    "name": "1.12 스트림 재등록 (강제 재시작)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"rtsp_url\": \"{{rtsp_url}}\"\n}"
                        },
                        "url": "{{base_url}}/api/video/streams/register"
                    }
                }
            ]
        },
        {
            "name": "2. 오디오 스트림 제어",
            "item": [
                {
                    "name": "2.1 오디오 스트림 목록 조회",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/audio/streams"
                    }
                },
                {
                    "name": "2.2 오디오 스트림 등록/시작",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"stream_id\": \"{{audio_stream_id}}\",\n  \"rtsp_url\": \"{{rtsp_url}}\",\n  \"use_microphone\": false\n}"
                        },
                        "url": "{{base_url}}/api/audio/streams"
                    }
                },
                {
                    "name": "2.3 오디오 스트림 삭제",
                    "request": {
                        "method": "DELETE",
                        "url": "{{base_url}}/api/audio/streams/{{audio_stream_id}}"
                    }
                },
                {
                    "name": "2.4 오디오 스트림 상태 조회",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/audio/streams/{{audio_stream_id}}/status"
                    }
                }
            ]
        },
        {
            "name": "3. 설정 관리",
            "item": [
                {
                    "name": "3.1 전체 설정 조회",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/config"
                    }
                },
                {
                    "name": "3.2 모듈별 설정 조회",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/config/modules/{{module_name}}"
                    }
                },
                {
                    "name": "3.3 모듈 설정 부분 업데이트",
                    "request": {
                        "method": "PATCH",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"enabled\": true,\n  \"options\": {}\n}"
                        },
                        "url": "{{base_url}}/api/config/modules/{{module_name}}"
                    }
                }
            ]
        },
        {
            "name": "4. 시스템 및 모니터링",
            "item": [
                {
                    "name": "4.1 통합 헬스 체크",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/health"
                    }
                },
                {
                    "name": "4.2 시스템 리소스 통계",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/stats/system"
                    }
                },
                {
                    "name": "4.3 모듈별 실행 통계",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/stats/modules"
                    }
                },
                {
                    "name": "4.4 대시보드 종합 데이터 조회",
                    "request": {
                        "method": "GET",
                        "url": "{{base_url}}/api/dashboard/stats"
                    }
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8000",
            "type": "string"
        },
        {
            "key": "stream_id",
            "value": "cam_01",
            "type": "string"
        },
        {
            "key": "audio_stream_id",
            "value": "audio_01",
            "type": "string"
        },
        {
            "key": "module_name",
            "value": "FaceBlurModule",
            "type": "string"
        },
        {
            "key": "rtsp_url",
            "value": "rtsp://127.0.0.1:8554/test",
            "type": "string"
        }
    ]
}